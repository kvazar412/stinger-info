//DROP DATABASE stinger_info;

//INSERT INTO films (film_id, film_name, film_year, film_director, film_country, pcs_info) VALUES ('123456', 'Deadpool', '2016', 'Tim Miller', 'USA', 'YES');
//INSERT INTO films (film_id, film_name, film_year, film_director, film_country, pcs_info) VALUES ('234567', 'The Matrix', '1999', 'Lana Wachowski, Lilly Wachowski', 'USA', 'NO');


CREATE DATABASE stinger_info;

USE stinger_info;

CREATE TABLE films
	(film_id VARCHAR(255),
	film_name VARCHAR(255) NOT NULL,
	film_year INT(4) NOT NULL,
	film_director VARCHAR(70) NOT NULL,
	film_country VARCHAR(70) NOT NULL,
	pcs_info ENUM('YES', 'NO', 'UNKNOWN') NOT NULL DEFAULT 'UNKNOWN',
	PRIMARY KEY (film_id));

CREATE TABLE users
	(user_id VARCHAR(255),
	user_role ENUM('ADMIN', 'USER') NOT NULL DEFAULT 'USER',
	PRIMARY KEY (user_id));
	
CREATE TABLE votes
	(film_id VARCHAR(255) NOT NULL,
	user_id VARCHAR(255) NOT NULL,
	vote_changed DATE NOT NULL,
	vote_value ENUM('YES', 'NO') NOT NULL,
	PRIMARY KEY (film_id, user_id),
	FOREIGN KEY (film_id) REFERENCES films (film_id),
	FOREIGN KEY (user_id) REFERENCES users (user_id));